/*! gm.datepickerMultiSelect 2015-10-13 */
!function(){angular.module("gm.datepickerMultiSelect",["ui.bootstrap"]).config(["$provide","$injector",function(a,b){var c=function(a){var b=a[0],c=b.link;return b.compile=function(){return function(a,b,d,e){function f(){angular.forEach(a.rows,function(a){angular.forEach(a,function(a){a.selected=g.indexOf(a.date.setHours(0,0,0,0))>-1})})}c.apply(this,arguments);var g=[];a.$on("update",function(a,b){g=b,f()}),a.$emit("requestSelectedDates"),a.$watch(function(){return e.activeDate?e.activeDate.getTime():!1},f)}},a};b.has("daypickerDirective")&&a.decorator("daypickerDirective",["$delegate",c]),b.has("uibDaypickerDirective")&&a.decorator("uibDaypickerDirective",["$delegate",c])}]).directive("multiSelect",function(){return{require:["ngModel"],link:function(a,b,c,d){var e,f;a.$on("requestSelectedDates",function(){a.$broadcast("update",e)}),a.$watchCollection(c.multiSelect,function(b){e=b||[],a.$broadcast("update",e)}),c.$observe("selectRange",function(a){f=!!a&&"false"!==a}),a.$watch(c.ngModel,function(a,b){if(a){var c=a.getTime();if(f){if(!e.length||e.length>1||e[0]==c)return e.splice(0,e.length,c);e.push(c);var d=Math.min.apply(null,e),g=Math.max.apply(null,e);for(d=new Date(d).setHours(24);g>d;)e.push(d),d=new Date(d).setHours(24)}else e.indexOf(c)<0?e.push(c):e.splice(e.indexOf(c),1)}})}}})}();