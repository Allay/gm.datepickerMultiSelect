/*! gm.datepickerMultiSelect 2015-10-23 */
!function(a){"use strict";a.module("gm.datepickerMultiSelect",["ui.bootstrap"]).config(["$provide","$injector",function(b,c){var d=function(a){var b=a[0],c=b.link;return b.compile=function(){return function(a,b,d,e){c.apply(this,arguments),a.selectedDates=[],a.selectRange,a.$parent.$watchCollection(d.multiSelect,function(b){a.selectedDates=b||[]}),d.$observe("selectRange",function(b){a.selectRange=!!b&&"false"!==b});var f=e[1];f.$viewChangeListeners.push(function(){var b=a.$parent.$eval(d.ngModel);if(b){var c=b.getTime(),e=a.selectedDates;if(a.selectRange){if(!e.length||e.length>1||e[0]==c)return e.splice(0,e.length,c);e.push(c);var f=Math.min.apply(null,e),g=Math.max.apply(null,e);for(f=new Date(f).setHours(24);g>f;)e.push(f),f=new Date(f).setHours(24)}else e.indexOf(c)<0?e.push(c):e.splice(e.indexOf(c),1)}})}},a};c.has("datepickerDirective")&&b.decorator("datepickerDirective",["$delegate",d]),c.has("uibDatepickerDirective")&&b.decorator("uibDatepickerDirective",["$delegate",d]);var e=function(b){var c=b[0],d=c.link;return c.compile=function(){return function(b,c,e,f){function g(){a.forEach(b.rows,function(c){a.forEach(c,function(a){a.selected=b.selectedDates.indexOf(a.date.setHours(0,0,0,0))>-1})})}d.apply(this,arguments),b.$parent.$watchCollection("selectedDates",g);var h=a.isArray(f)?f[0]:f;b.$watch(function(){return h.activeDate.getTime()},g)}},b};c.has("daypickerDirective")&&b.decorator("daypickerDirective",["$delegate",e]),c.has("uibDaypickerDirective")&&b.decorator("uibDaypickerDirective",["$delegate",e])}])}(window.angular);